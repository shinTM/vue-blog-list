!function(e){"use strict";var t=function(t,n){this.defaultSettings={threshold:600,mainMenuSelector:"#main-menu",menuItemSelector:".menu-item",moreMenuContent:"&middot;&middot;&middot;",clotting:!0,templates:{mobileMenuToogleButton:'<button class="mobile-menu-toggle-button"><i class="menu-toggle__icon material-icons"></i></button>'}},this.$window=e(window),this.$document=e(document),this.settings=e.extend(this.defaultSettings,n),this.$instance=e(t).addClass("cherry-responsive-menu"),this.$mainMenu=e(this.settings.mainMenuSelector,this.$instance),this.$menuItems=e(">"+this.settings.menuItemSelector,this.$mainMenu).addClass("cherry-responsive-menu-item"),this.$moreItemsInstance=null,this.$mobileToogleButton=null,this.hiddenItemsArray=[],this.createMenuInstance(),this.$instance.trigger("responsiveMenuCreated")};t.prototype={constructor:t,createMenuInstance:function(){var t=this;n.isEmpty(this.settings.moreMenuContent)||(t.$mainMenu.append('<li class="menu-item menu-item-has-children cherry-responsive-menu-avaliable-items" hidden><div class="menu-link-wrapper"><a href="#">'+this.settings.moreMenuContent+'</a></div><ul class="sub-menu"></ul></li>'),t.$moreItemsInstance=e("> .cherry-responsive-menu-avaliable-items",this.$mainMenu),t.$moreItemsInstance.attr({hidden:"hidden"})),n.isEmpty(this.settings.templates.mobileMenuToogleButton)||(this.$instance.prepend(this.settings.templates.mobileMenuToogleButton),this.$mobileToogleButton=e(".mobile-menu-toggle-button",this.$instance)),this.getMobileStatus()&&(this.$instance.addClass("mobile-menu"),e("body").addClass("mobile-menu-active")),this.getMobileStatus()||this.rebuildItems(),this.mobileViewHandler(),this.isMegaMenuEnabled()||this.subMenuHandler(),this.watch()},subMenuHandler:function(){function t(t){e(t.currentTarget);e(this).data("offset",e(this).offset().top)}function n(t){var n,i,s,o,a;if(t.preventDefault(),t.stopPropagation(),n=e(t.currentTarget),i=n.siblings(".menu-item.menu-item-has-children"),s=e(">.menu-link-wrapper > a",n),o=e(".sub-menu:first",n),a=n.data("offset"),a!==n.offset().top)return!1;if(i[0]&&(i.removeClass("menu-hover"),e("menu-item-has-children",i).removeClass("menu-hover")),!e(".sub-menu",n)[0]||n.hasClass("menu-hover"))return window.location=s.attr("href"),!1;if(o[0]){var r=e("body").outerWidth(!0),m=o.offset().left+o.outerWidth(!0);n.addClass("menu-hover"),r<=m?(o.addClass("left-side"),o.find(".sub-menu").addClass("left-side")):0>o.offset().left&&(o.removeClass("left-side"),o.find(".sub-menu").removeClass("left-side"))}}function i(t){var n,i;if(o=e(t.target).parents(".menu-item"),n=o.children(".sub-menu").first(),i=e(".sub-menu",o),0<n.length){var s=e("body").outerWidth(!0),a=n.offset().left+n.outerWidth(!0);o.addClass("menu-hover"),s<=a?(n.addClass("left-side"),n.find(".sub-menu").addClass("left-side")):0>n.offset().left&&(n.removeClass("left-side"),n.find(".sub-menu").removeClass("left-side")),i.addClass("in-transition").one(r,function(){i.removeClass("in-transition")})}}function s(t){var n=e(".sub-menu",o);o.removeClass("menu-hover"),n.addClass("in-transition").one(r,function(){n.removeClass("in-transition")})}var o,a=this,r="transitionend oTransitionEnd webkitTransitionEnd";a.mobileAndTabletcheck()?(this.$mainMenu.on("touchstart",".menu-item",t),this.$mainMenu.on("touchend",".menu-item",n),e(document).on("touchend",function(t){e(".menu-item-has-children",this.$mainMenu).removeClass("menu-hover")})):(this.$mainMenu.on("mouseenter",".menu-item",i),this.$mainMenu.on("mouseleave",".menu-item",s)),CherryJsCore.variable.$window.on("orientationchange resize",function(){e("html").hasClass("mobile-menu-active")||(a.$mainMenu.find(".menu-item").removeClass("menu-hover"),a.$mainMenu.find(".sub-menu.left-side").removeClass("left-side"))})},mobileViewHandler:function(){var t=this,n="mousedown",i="mouseup";("ontouchend"in window||"ontouchstart"in window)&&(n="touchstart",i="touchend"),this.$mobileToogleButton.on(i,function(n){n.preventDefault(),e("body").toggleClass("mobile-menu-visible"),t.$instance.toggleClass("active")})},watch:function(t){var t=t||10;e(window).on("resize.responsiveMenu orientationchange.responsiveMenu",this.debounce(t,this.watcher.bind(this)))},watcher:function(t){e(window).width();this.getMobileStatus()?(this.$instance.addClass("mobile-menu"),e("body").addClass("mobile-menu-active"),this.$menuItems.removeAttr("hidden"),0!==this.hiddenItemsArray.length&&e("> .sub-menu",this.$moreItemsInstance).empty(),this.$moreItemsInstance.attr({hidden:"hidden"})):(this.$instance.removeClass("mobile-menu"),e("body").removeClass("mobile-menu-active"),e("body").removeClass("mobile-menu-visible"),this.settings.templates.mobileMenuToogleButton,this.rebuildItems())},rebuildItems:function(t){var i=this,s=(this.$mainMenu.width(),this.$mainMenu.width()-i.$moreItemsInstance.outerWidth(!0)),o=0,a=(this.getVisibleItemsWidth(),[]),r=[];return!!i.settings.clotting&&(i.$menuItems.each(function(){var t=e(this);o+=t.outerWidth(!0),o>s&&!n.inArray(this,r)?r.push(this):a.push(this)}),r.forEach(function(t){var n=e(t);n.attr({hidden:"hidden"})}),a.forEach(function(t){var n=e(t);n.removeAttr("hidden")}),e("> .sub-menu",i.$moreItemsInstance).empty(),r.forEach(function(t){var n=e(t).clone();n.removeAttr("hidden"),e("> .sub-menu",i.$moreItemsInstance).append(n)}),0==r.length?i.$moreItemsInstance.attr({hidden:"hidden"}):i.$moreItemsInstance.removeAttr("hidden"),i.hiddenItemsArray=r,void this.$instance.trigger("hideItems"))},getVisibleItemsWidth:function(){var t=0;return this.$menuItems.each(function(){var n=e(this);n.hasAttr("hidden")||(t+=n.outerWidth(!0))}),t},getMobileStatus:function(){return this.$window.width()<this.settings.threshold},isMegaMenuEnabled:function(){return void 0!==window.__tm.megaMenu&&(!0===window.__tm.megaMenu.isActive&&"main"==window.__tm.megaMenu.location)},mobileAndTabletcheck:function(){var e=!1;return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0)}(navigator.userAgent||navigator.vendor||window.opera),e},debounce:function(e,t){var n;return function(i){function s(){t.call(this,i),n=null}n&&clearTimeout(n),n=setTimeout(s,e)}}};var n={isEmpty:function(e){return!1===e||""===e||null===e||void 0===e},isEmptyObject:function(e){return!0===this.isEmpty(e)||0===e.length},isString:function(e){return"string"==typeof e||e instanceof String},isArray:function(t){return e.isArray(t)},inArray:function(t,n){return e.inArray(t,n)!==-1}};e.fn.hasAttr=function(e){return void 0!==this.attr(e)},Array.prototype.removeElement=function(e){var t=this.indexOf(e);return this.splice(t,1)},e.fn.cherryResponsiveMenu=function(n){return this.each(function(){var i=e(this),s="object"==typeof n?n:{};i.data("cherryResponsiveMenu")||i.data("cherryResponsiveMenu",new t(this,s))})}}(jQuery);